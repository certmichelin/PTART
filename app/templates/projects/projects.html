{% extends "base.html" %}
{% block title %} Projects | sh00t{% endblock %}

{% block page %}
<div id="page-wrapper">
    <div class="container-fluid">

        {% include '_include/html/header.html' with item='projects' active_icon='fa fa-cubes' active_text='Projects' %}
        {% include "_include/html/messages.html" %}
        
        <!-- Project creation form -->
        <div class="row">
            <div class="col-lg-12">
                <h3>New Project</h3>

                <div class="form-group">
                    <label>Name</label>
                    <input id="name" class="form-control" autocomplete="off" placeholder="Project name (ex: example.com, etc...)" />
                </div>

                <div class="form-group">
                    <label>Scope</label>
                    <textarea id="scope" class="form-control" rows="10" style="resize:vertical"></textarea>
                </div>

                <div class="form-group">
                    <label>Pentesters</label> 
                    <select class="js-states form-control" id="pentesters" multiple="multiple">
                        {% for user in users %}
                            <option value="{{ user.id }}">{{ user.username }}</option>
                        {% endfor %}
                    </select>
                </div>
                
                <button id="createBtn" type="submit" class="btn btn-primary">Submit</button>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_foot %}
    {% include '_include/js/createItem.html' with item='Project' ajax_function='ajaxCreateProject' params='name,scope' params_to_clean='name,scope' %}
    <script type="text/javascript">
        var selectedPentesters = [];
        selectedPentesters.push({{ current_user.id }});
        $('#pentesters').select2().val(selectedPentesters).trigger("change");
    </script>
{% endblock %}